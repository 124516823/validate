/* http://diegolopeslima.github.com/jQuery-AnyForm */
(function(a,b,c,d){var e={sendForm:!0,waiAria:!0,onSubmit:!0,onKeyup:!1,onBlur:!1,onChange:!1,nameSpace:"validate",conditional:{},prepare:{},eachField:a.noop,eachInvalidField:a.noop,eachValidField:a.noop,invalid:a.noop,valid:a.noop,filter:"*"},f=['[type="color"],[type="date"],[type="datetime"],[type="datetime-local"],[type="email"],[type="file"],[type="hidden"],[type="month"],[type="number"],[type="password"],[type="range"],[type="search"],[type="tel"],[type="text"],[type="time"],[type="url"],[type="week"],textarea',"select",'[type="checkbox"],[type="radio"]'],g=f.join(","),h=function(b,c){var e={pattern:!0,conditional:!0,required:!0},g=a(this),h=g.val(),i=g.data("prepare"),j=g.data("pattern")||/(?:)/,k=g.data("ignore-case"),l=g.data("mask"),m=g.data("conditional"),n=g.data("required"),o=g.data("trim"),p=/^(true|1|)$/i,q=/^(false|0)$/i;if(p.test(o)&&(h=a.trim(h)),a.isFunction(i)?h=i.call(g,h)+"":a.isFunction(c.prepare[i])&&(h=c.prepare[i].call(g,h)+""),"regexp"!=a.type(j)&&(k=q.test(k)?!1:!0,j=k?RegExp(j,"i"):RegExp(j)),m!=d)if(a.isFunction(m))e.conditional=!!m.call(g,b,c);else for(var r=m.split(/[\s\t]+/),s=0,t=r.length;t>s;s++)r[s]in c.conditional&&!c.conditional[r[s]].call(g,b,c)&&(e.conditional=!1);if(n=p.test(n)?!0:!1,n&&(g.is(f[0]+","+f[1])?!h.length>0&&(e.required=!1):g.is(f[2])&&(g.is("[name]")?0==a('[name="'+g.attr("name")+'"]:checked').length&&(e.required=!1):e.required=g.is(":checked"))),g.is(f[0]))if(j.test(h)){if("keyup"!=b.type&&l!=d){for(var u=h.match(j),v=0,t=u.length;t>v;v++)l=l.replace(RegExp("\\$\\{"+v+"(?:\\:([^\\{\\}\\:]*))?\\}"),u[v]!==d?u[v]:"$1");j.test(l)&&g.val(l.replace(/\$\{[0-9]+(?:\:([^\{\}]*))?\}/g,"$1"))}}else n?e.pattern=!1:h.length>0&&(e.pattern=!1);return c.eachField.call(g,b,e,c),g.trigger("validated",[c]),e.required&&e.pattern&&e.conditional?(c.waiAria&&g.attr("aria-invalid",!1),c.eachValidField.call(g,b,e,c),g.trigger("valid",[c])):(c.waiAria&&g.attr("aria-invalid",!0),c.eachInvalidField.call(g,b,e,c),g.trigger("invalid",[c])),e};a.extend({validateSetup:function(b){return a.isPlainObject(b)?a.extend(e,b):e},validate:{version:"1b"}}).fn.extend({validate:function(b){return b=a.isPlainObject(b)?a.extend(e,b):e,a(this).validateDestroy().each(function(){var c=a(this);if(c.is("form")){c.data("validate",{options:b});var d=c.find(g);c.is("[id]")&&(d=d.add('[form="'+c.attr("id")+'"]').filter(g)),d=d.filter(b.filter),b.onKeyup&&d.filter(f[0]).on("keyup."+b.namespace,function(a){h.call(this,a,b)}),b.onBlur&&d.on("blur."+b.namespace,function(a){h.call(this,a,b)}),b.onChange&&d.on("change."+b.namespace,function(a){h.call(this,a,b)}),b.onSubmit&&c.on("submit."+b.namespace,function(e){var f=!0;d.each(function(){var a=h.call(this,e,b);a.pattern&&a.conditional&&a.required||(f=!1)}),c.trigger("validated",[b]),f?(b.sendForm||e.preventDefault(),a.isFunction(b.valid)&&b.valid.call(c,e,b),c.trigger("valid",[b])):(e.preventDefault(),a.isFunction(b.invalid)&&b.invalid.call(c,e,b),c.trigger("invalid",[b]))})}})},validateDestroy:function(){var b=a(this),c=b.data("validate");if(b.is("form")&&a.isPlainObject(c)&&c.options.nameSpace!==d){var e=c.nameSpace,f=b.removeData("validate").find(g).andSelf();b.is("[id]")&&(f=f.add(a('[form="'+b.attr("id")+'"]').filter(g))),f.off("."+e)}return b}})})(jQuery,window,document);